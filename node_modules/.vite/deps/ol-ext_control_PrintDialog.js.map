{
  "version": 3,
  "sources": ["../../ol-ext/control/Dialog.js", "../../ol-ext/util/getMapCanvas.js", "../../ol-ext/control/CanvasBase.js", "../../ol-ext/control/Legend.js", "../../ol-ext/control/Print.js", "../../ol-ext/control/CanvasTitle.js", "../../ol-ext/geom/sphere.js", "../../ol-ext/control/Compass.js", "../../ol-ext/control/PrintDialog.js"],
  "sourcesContent": ["import ol_control_Control from 'ol/control/Control.js'\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/** \r\n * @classdesc\r\n * Application dialog\r\n * @extends {ol_control_Control}\r\n * @constructor\r\n * @param {*} options\r\n *  @param {string} options.className\r\n *  @param {ol.Map} options.map the map to place the dialog inside\r\n *  @param {Element} options.target target to place the dialog\r\n *  @param {boolean} options.fullscreen view dialog fullscreen (same as options.target = document.body)\r\n *  @param {boolean} options.zoom add a zoom effect\r\n *  @param {boolean} options.closeBox add a close button\r\n *  @param {number} options.max if not null add a progress bar to the dialog, default null\r\n *  @param {boolean} options.hideOnClick close dialog when click\r\n *  @param {boolean} options.hideOnBack close dialog when click the background\r\n *  @param {boolean} options.closeOnSubmit Prevent closing the dialog on submit\r\n */\r\nvar ol_control_Dialog = class olcontrolDialog extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {};\r\n    if (options.fullscreen) options.target = document.body;\r\n\r\n    var element = ol_ext_element.create('DIV', {\r\n      className: ((options.className || '') + (options.zoom ? ' ol-zoom' : '') + ' ol-ext-dialog').trim()\r\n    })\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    });\r\n\r\n    // Constructor\r\n    element.addEventListener('click', function (e) {\r\n      if (this.get('hideOnBack') && e.target === element) this.close();\r\n      if (this.get('hideOnClick')) this.close();\r\n    }.bind(this));\r\n    // form\r\n    var form = ol_ext_element.create('FORM', {\r\n      on: {\r\n        submit: this._onButton('submit')\r\n      },\r\n      parent: element\r\n    });\r\n    // Title\r\n    ol_ext_element.create('H2', {\r\n      parent: form\r\n    });\r\n    // Close box\r\n    ol_ext_element.create('DIV', {\r\n      className: 'ol-closebox',\r\n      click: this._onButton('cancel'),\r\n      parent: form\r\n    });\r\n    // Content\r\n    ol_ext_element.create('DIV', {\r\n      className: 'ol-content',\r\n      parent: form\r\n    });\r\n    // Progress\r\n    this._progress = ol_ext_element.create('DIV', {\r\n      style: { display: 'none' },\r\n      parent: form\r\n    });\r\n    var bar = ol_ext_element.create('DIV', {\r\n      className: 'ol-progress-bar',\r\n      parent: this._progress\r\n    });\r\n    this._progressbar = ol_ext_element.create('DIV', {\r\n      parent: bar\r\n    });\r\n    this._progressMessage = ol_ext_element.create('DIV', {\r\n      className: 'ol-progress-message',\r\n      parent: this._progress\r\n    });\r\n    // Buttons\r\n    ol_ext_element.create('DIV', {\r\n      className: 'ol-buttons',\r\n      parent: form\r\n    });\r\n\r\n    this.set('closeBox', options.closeBox !== false);\r\n    this.set('zoom', !!options.zoom);\r\n    this.set('hideOnClick', !!options.hideOnClick);\r\n    this.set('hideOnBack', !!options.hideOnBack);\r\n    this.set('className', element.className);\r\n    this.set('closeOnSubmit', options.closeOnSubmit);\r\n    this.set('buttons', options.buttons);\r\n    this.setContent(options);\r\n  }\r\n  /** Show a new dialog\r\n   * @param { * | Element | string } options options or a content to show\r\n   *  @param {Element | String} options.content dialog content\r\n   *  @param {string} options.title title of the dialog\r\n   *  @param {string} options.className dialog class name\r\n   *  @param {number} options.autoclose a delay in ms before auto close\r\n   *  @param {boolean} options.hideOnBack close dialog when click the background\r\n   *  @param {number} options.max if not null add a progress bar to the dialog\r\n   *  @param {number} options.progress set the progress bar value\r\n   *  @param {Object} options.buttons a key/value list of button to show\r\n   *  @param {function} [options.onButton] a function that takes the button id and a list of input by className\r\n   */\r\n  show(options) {\r\n    if (options) {\r\n      if (options instanceof Element || typeof (options) === 'string') {\r\n        options = { content: options };\r\n      }\r\n      this.setContent(options);\r\n    }\r\n    this.element.classList.add('ol-visible');\r\n    var input = this.element.querySelector('input[type=\"text\"],input[type=\"search\"],input[type=\"number\"]');\r\n    if (input)\r\n      input.focus();\r\n    this.dispatchEvent({ type: 'show' });\r\n    if (options) {\r\n      // Auto close\r\n      if (options.autoclose) {\r\n        var listener = setTimeout(function () { this.hide(); }.bind(this), options.autoclose);\r\n        this.once('hide', function () {\r\n          clearTimeout(listener);\r\n        });\r\n      }\r\n      // hideOnBack\r\n      if (options.hideOnBack) {\r\n        // save value\r\n        var value = this.get('hideOnBack');\r\n        this.set('hideOnBack', true);\r\n        this.once('hide', function () {\r\n          this.set('hideOnBack', value);\r\n        }.bind(this));\r\n      }\r\n    }\r\n  }\r\n  /** Open the dialog\r\n   */\r\n  open() {\r\n    this.show();\r\n  }\r\n  /** Set the dialog content\r\n   * @param {Element | String} content dialog content\r\n   */\r\n  setContentMessage(content) {\r\n    if (content !== undefined) {\r\n      var elt = this.getContentElement();\r\n      if (content instanceof Element)\r\n        ol_ext_element.setHTML(elt, '');\r\n      ol_ext_element.setHTML(elt, content || '');\r\n    }\r\n  }\r\n  /** Set the dialog title\r\n   * @param {Element | String} content dialog content\r\n   */\r\n  setTitle(title) {\r\n    var form = this.element.querySelector('form');\r\n    form.querySelector('h2').innerText = title || '';\r\n    if (title) {\r\n      form.classList.add('ol-title');\r\n    } else {\r\n      form.classList.remove('ol-title');\r\n    }\r\n  }\r\n  /** Set the dialog content\r\n   * @param {*} options\r\n   *  @param {Element | String} options.content dialog content\r\n   *  @param {string} options.title title of the dialog\r\n   *  @param {string} options.className dialog class name\r\n   *  @param {number} options.max if not null add a progress bar to the dialog\r\n   *  @param {number} options.progress set the progress bar value\r\n   *  @param {Object} options.buttons a key/value list of button to show\r\n   *  @param {function} [options.onButton] a function that takes the button id and a list of input by className\r\n   */\r\n  setContent(options) {\r\n    if (!options)\r\n      return;\r\n    this.element.className = this.get('className');\r\n    if (typeof (options) === 'string')\r\n      options = { content: options };\r\n    options = options || {};\r\n    this.setProgress(false);\r\n    if (options.max)\r\n      this.setProgress(0, options.max);\r\n    if (options.progress !== undefined)\r\n      this.setProgress(options.progress);\r\n    //this.element.className = 'ol-ext-dialog' + (this.get('zoom') ? ' ol-zoom' : '');\r\n    if (this.get('zoom'))\r\n      this.element.classList.add('ol-zoom');\r\n    else\r\n      this.element.classList.remove('ol-zoom');\r\n    if (options.className) {\r\n      options.className.split(' ').forEach(function (c) {\r\n        this.element.classList.add(c);\r\n      }.bind(this));\r\n    }\r\n    var form = this.element.querySelector('form');\r\n    // Content\r\n    if (options.content !== undefined) {\r\n      if (options.content instanceof Element)\r\n        ol_ext_element.setHTML(form.querySelector('.ol-content'), '');\r\n      ol_ext_element.setHTML(form.querySelector('.ol-content'), options.content || '');\r\n    }\r\n    // Title\r\n    this.setTitle(options.title);\r\n    // Closebox\r\n    if (options.closeBox || (this.get('closeBox') && options.closeBox !== false)) {\r\n      form.classList.add('ol-closebox');\r\n    } else {\r\n      form.classList.remove('ol-closebox');\r\n    }\r\n    // Buttons\r\n    var buttons = this.element.querySelector('.ol-buttons');\r\n    buttons.innerHTML = '';\r\n    var btn = options.buttons || this.get('buttons');\r\n    if (btn) {\r\n      form.classList.add('ol-button');\r\n      for (var i in btn) {\r\n        ol_ext_element.create('INPUT', {\r\n          type: (i === 'submit' ? 'submit' : 'button'),\r\n          value: btn[i],\r\n          click: this._onButton(i, options.onButton),\r\n          parent: buttons\r\n        });\r\n      }\r\n    } else {\r\n      form.classList.remove('ol-button');\r\n    }\r\n  }\r\n  /** Get dialog content element\r\n   * @returns {Element}\r\n   */\r\n  getContentElement() {\r\n    return this.element.querySelector('form .ol-content');\r\n  }\r\n  /** Set progress\r\n   * @param {number|boolean} val the progress value or false to hide the progressBar\r\n   * @param {number} max\r\n   * @param {string|element} message\r\n   */\r\n  setProgress(val, max, message) {\r\n    if (val === false) {\r\n      ol_ext_element.setStyle(this._progress, { display: 'none' });\r\n      return;\r\n    }\r\n    if (max > 0) {\r\n      this.set('max', Number(max));\r\n    } else {\r\n      max = this.get('max');\r\n    }\r\n    if (!max) {\r\n      ol_ext_element.setStyle(this._progress, { display: 'none' });\r\n    } else {\r\n      var p = Math.round(val / max * 100);\r\n      ol_ext_element.setStyle(this._progress, { display: '' });\r\n      this._progressbar.className = p ? '' : 'notransition';\r\n      ol_ext_element.setStyle(this._progressbar, { width: p + '%' });\r\n    }\r\n    this._progressMessage.innerHTML = '';\r\n    ol_ext_element.setHTML(this._progressMessage, message || '');\r\n  }\r\n  /** Returns a function to do something on button click\r\n   * @param {strnig} button button id\r\n   * @param {function} callback\r\n   * @returns {function}\r\n   * @private\r\n   */\r\n  _onButton(button, callback) {\r\n    // Dispatch a button event\r\n    var fn = function (e) {\r\n      e.preventDefault();\r\n      if (button !== 'submit' || this.get('closeOnSubmit') !== false) this.hide();\r\n      var inputs = this.getInputs();\r\n      this.dispatchEvent({ type: 'button', button: button, inputs: inputs });\r\n      if (typeof (callback) === 'function') callback(button, inputs);\r\n    }.bind(this);\r\n    return fn;\r\n  }\r\n  /** Get inputs, textarea an select of the dialog by classname\r\n   * @return {Object} a {key:value} list of Elements by classname\r\n   */\r\n  getInputs() {\r\n    var inputs = {};\r\n    ['input', 'textarea', 'select'].forEach(function (type) {\r\n      this.element.querySelectorAll('form ' + type).forEach(function (input) {\r\n        if (input.className) {\r\n          input.className.split(' ').forEach(function (n) {\r\n            inputs[n] = input;\r\n          });\r\n        }\r\n      });\r\n    }.bind(this));\r\n    return inputs;\r\n  }\r\n  /** Close the dialog\r\n   */\r\n  hide() {\r\n    this.element.classList.remove('ol-visible');\r\n    this.dispatchEvent({ type: 'hide' });\r\n  }\r\n  /** Close the dialog \r\n   */\r\n  close() {\r\n    this.hide();\r\n  }\r\n  /** The dialog is shown\r\n   * @return {bool} true if a dialog is open\r\n   */\r\n  isOpen() {\r\n    return (this.element.classList.contains('ol-visible'));\r\n  }\r\n}\r\n\r\nexport default ol_control_Dialog\r\n", "/** Get a canvas overlay for a map (non rotated, on top of the map)\r\n * @param {ol.Map} map\r\n * @return {canvas}\r\n */\r\nvar ol_ext_getMapCanvas = function(map) {\r\n  if (!map) return null;\r\n  var canvas = map.getViewport().getElementsByClassName('ol-fixedoverlay')[0];\r\n  if (!canvas) {\r\n    if (map.getViewport().querySelector('.ol-layers')) {\r\n      // Add a fixed canvas layer on top of the map\r\n      canvas = document.createElement('canvas');\r\n      canvas.className = 'ol-fixedoverlay';\r\n      map.getViewport().querySelector('.ol-layers').after(canvas);\r\n      // Clear before new compose\r\n      map.on('precompose', function (e){\r\n        canvas.width = map.getSize()[0] * e.frameState.pixelRatio;\r\n        canvas.height = map.getSize()[1] * e.frameState.pixelRatio;\r\n      });\r\n    } else {\r\n      canvas = map.getViewport().querySelector('canvas');\r\n    }\r\n  }\r\n  return canvas;\r\n};\r\n\r\nexport default ol_ext_getMapCanvas\r\n  ", "import ol_control_Control from 'ol/control/Control.js'\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\r\nimport ol_style_Style from 'ol/style/Style.js'\r\nimport ol_style_Fill from 'ol/style/Fill.js'\r\nimport ol_style_Stroke from 'ol/style/Stroke.js'\r\nimport ol_style_Text from 'ol/style/Text.js'\r\nimport ol_ext_getMapCanvas from '../util/getMapCanvas.js'\r\n\r\n/**\r\n * @classdesc \r\n *   Attribution Control integrated in the canvas (for jpeg/png export purposes).\r\n * @see http://www.kreidefossilien.de/webgis/dokumentation/beispiele/export-map-to-png-with-scale\r\n *\r\n * @constructor\r\n * @extends {ol_control_Control}\r\n * @param {Object=} options extend the ol.control options. \r\n *  @param {ol_style_Style} options.style style used to draw the title.\r\n */\r\nvar ol_control_CanvasBase = class olcontrolCanvasBase extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {}\r\n    super(options)\r\n\r\n    // Define a style to draw on the canvas\r\n    this.setStyle(options.style)\r\n\r\n  }\r\n  /**\r\n   * Remove the control from its current map and attach it to the new map.\r\n   * Subclasses may set up event handlers to get notified about changes to\r\n   * the map here.\r\n   * @param {ol_Map} map Map.\r\n   * @api stable\r\n   */\r\n  setMap(map) {\r\n    this.getCanvas(map)\r\n\r\n    var oldmap = this.getMap()\r\n    if (this._listener) {\r\n      ol_Observable_unByKey(this._listener)\r\n      this._listener = null\r\n    }\r\n\r\n    super.setMap(map)\r\n    if (oldmap) {\r\n      try { oldmap.renderSync()}  catch (e) { /* ok */ }\r\n    }\r\n\r\n    if (map) {\r\n      this._listener = map.on('postcompose', this._draw.bind(this))\r\n      // Get a canvas layer on top of the map\r\n    }\r\n  }\r\n  /** Get canvas overlay\r\n   */\r\n  getCanvas(map) {\r\n    return ol_ext_getMapCanvas(map)\r\n  }\r\n  /** Get map Canvas\r\n   * @private\r\n   */\r\n  getContext(e) {\r\n    var ctx = e.context\r\n    if (!ctx && this.getMap()) {\r\n      var c = this.getMap().getViewport().getElementsByClassName('ol-fixedoverlay')[0]\r\n      ctx = c ? c.getContext('2d') : null\r\n    }\r\n    return ctx\r\n  }\r\n  /** Set Style\r\n   * @api\r\n   */\r\n  setStyle(style) {\r\n    this._style = style || new ol_style_Style({})\r\n  }\r\n  /** Get style\r\n   * @api\r\n   */\r\n  getStyle() {\r\n    return this._style\r\n  }\r\n  /** Get stroke\r\n   * @api\r\n   */\r\n  getStroke() {\r\n    var t = this._style.getStroke()\r\n    if (!t)\r\n      this._style.setStroke(new ol_style_Stroke({ color: '#000', width: 1.25 }))\r\n    return this._style.getStroke()\r\n  }\r\n  /** Get fill\r\n   * @api\r\n   */\r\n  getFill() {\r\n    var t = this._style.getFill()\r\n    if (!t)\r\n      this._style.setFill(new ol_style_Fill({ color: '#fff' }))\r\n    return this._style.getFill()\r\n  }\r\n  /** Get stroke\r\n   * @api\r\n   */\r\n  getTextStroke() {\r\n    var t = this._style.getText()\r\n    if (!t)\r\n      t = new ol_style_Text({})\r\n    if (!t.getStroke())\r\n      t.setStroke(new ol_style_Stroke({ color: '#fff', width: 3 }))\r\n    return t.getStroke()\r\n  }\r\n  /** Get text fill\r\n   * @api\r\n   */\r\n  getTextFill() {\r\n    var t = this._style.getText()\r\n    if (!t)\r\n      t = new ol_style_Text({})\r\n    if (!t.getFill())\r\n      t.setFill(new ol_style_Fill({ color: '#fff' }))\r\n    return t.getFill()\r\n  }\r\n  /** Get text font\r\n   * @api\r\n   */\r\n  getTextFont() {\r\n    var t = this._style.getText()\r\n    if (!t)\r\n      t = new ol_style_Text({})\r\n    if (!t.getFont())\r\n      t.setFont('12px sans-serif')\r\n    return t.getFont()\r\n  }\r\n  /** Draw the control on canvas\r\n   * @protected\r\n   */\r\n  _draw( /* e */) {\r\n    console.warn('[CanvasBase] draw function not implemented.')\r\n  }\r\n}\r\n\r\nexport default ol_control_CanvasBase\r\n", "import {asString as ol_color_asString} from 'ol/color.js'\r\nimport ol_control_CanvasBase from './CanvasBase.js'\r\n// eslint-disable-next-line no-unused-vars\r\nimport ol_legend_Legend from '../legend/Legend.js'\r\n\r\n/** Create a legend for styles\r\n * @constructor\r\n * @extends {ol_control_CanvasBase}\r\n * @fires select\r\n * @param {*} options\r\n *  @param {String} options.className class of the control\r\n *  @param {String} [options.title=\"legend\"] control title\r\n *  @param {String} [options.emptyTitle=\"no legend\"] control title when legend is empty\r\n *  @param {ol_legend_Legend} options.legend\r\n *  @param {boolean | undefined} options.collapsed Specify if legend should be collapsed at startup. Default is true.\r\n *  @param {boolean | undefined} options.collapsible Specify if legend can be collapsed, default true.\r\n *  @param {Element | string | undefined} options.target Specify a target if you want the control to be rendered outside of the map's viewport.\r\n */\r\nvar ol_control_Legend = class olcontrolLegend extends ol_control_CanvasBase {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    var element = document.createElement('div');\r\n\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    });\r\n\r\n    if (options.target) {\r\n      element.className = options.className || 'ol-legend';\r\n    } else {\r\n      element.className = (options.className || 'ol-legend')\r\n        + ' ol-unselectable ol-control'\r\n        + (options.collapsible === false ? ' ol-uncollapsible' : ' ol-collapsed');\r\n      // Show on click\r\n      var button = document.createElement('button');\r\n      button.setAttribute('type', 'button');\r\n      button.addEventListener('click', function () {\r\n        this.toggle();\r\n      }.bind(this));\r\n      element.appendChild(button);\r\n      // Hide on click\r\n      button = document.createElement('button');\r\n      button.setAttribute('type', 'button');\r\n      button.className = 'ol-closebox';\r\n      button.addEventListener('click', function () {\r\n        this.toggle();\r\n      }.bind(this));\r\n      element.appendChild(button);\r\n    }\r\n\r\n    // The legend\r\n    this._legend = options.legend;\r\n    this._legend.getCanvas().className = 'ol-legendImg';\r\n    // Legend element\r\n    element.appendChild(this._legend.getCanvas());\r\n    element.appendChild(this._legend.getListElement());\r\n\r\n    if (options.collapsible !== false && options.collapsed === false) {\r\n      this.show();\r\n    }\r\n\r\n    // Select item on legend\r\n    this._legend.on('select', function (e) {\r\n      this.dispatchEvent(e);\r\n    }.bind(this));\r\n    // Refresh legend\r\n    this._legend.on('refresh', function () {\r\n      if (this._onCanvas && this.getMap()) {\r\n        try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n      }\r\n    }.bind(this));\r\n    // Legend has items\r\n    this._legend.on('items', function (e) {\r\n      if (e.nb) {\r\n        this.element.classList.remove('ol-empty');\r\n        this.element.title = options.title || 'legend';\r\n      } else {\r\n        this.element.classList.add('ol-empty');\r\n        this.element.title = options.emptyTitle || 'no legend';\r\n      }\r\n      this.dispatchEvent(e)\r\n    }.bind(this));\r\n  }\r\n  /** Get the legend associated with the control\r\n   * @returns {ol_legend_Legend}\r\n   */\r\n  getLegend() {\r\n    return this._legend;\r\n  }\r\n  /** Draw control on canvas\r\n   * @param {boolean} b draw on canvas.\r\n   */\r\n  setCanvas(b) {\r\n    this._onCanvas = b;\r\n    this.element.style.visibility = b ? \"hidden\" : \"visible\";\r\n    if (this.getMap()) {\r\n      try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n    }\r\n  }\r\n  /** Is control on canvas\r\n   * @returns {boolean}\r\n   */\r\n  onCanvas() {\r\n    return !!this._onCanvas;\r\n  }\r\n  /** Draw legend on canvas\r\n   * @private\r\n   */\r\n  _draw(e) {\r\n    if (this._onCanvas && !this.element.classList.contains('ol-collapsed')) {\r\n      var canvas = this._legend.getCanvas();\r\n      var ctx = this.getContext(e);\r\n      var h = ctx.canvas.height - canvas.height;\r\n      ctx.save();\r\n      ctx.rect(0, h, canvas.width, canvas.height);\r\n      var col = '#fff';\r\n      if (this._legend.getTextStyle().getBackgroundFill()) {\r\n        col = ol_color_asString(this._legend.getTextStyle().getBackgroundFill().getColor());\r\n      }\r\n      ctx.fillStyle = ctx.strokeStyle = col;\r\n      ctx.lineWidth = 10;\r\n      ctx.lineJoin = 'round';\r\n      ctx.stroke();\r\n      ctx.clearRect(0, h, canvas.width, canvas.height);\r\n      ctx.fill();\r\n      ctx.drawImage(canvas, 0, h);\r\n      ctx.restore();\r\n    }\r\n  }\r\n  /** Show control\r\n   */\r\n  show() {\r\n    if (this.element.classList.contains('ol-collapsed')) {\r\n      this.element.classList.remove('ol-collapsed');\r\n      this.dispatchEvent({ type: 'change:collapse', collapsed: false });\r\n      if (this.getMap()) {\r\n        try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n      }\r\n    }\r\n  }\r\n  /** Hide control\r\n   */\r\n  hide() {\r\n    if (!this.element.classList.contains('ol-collapsed')) {\r\n      this.element.classList.add('ol-collapsed');\r\n      this.dispatchEvent({ type: 'change:collapse', collapsed: true });\r\n      if (this.getMap()) {\r\n        try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n      }\r\n    }\r\n  }\r\n  /** Show/hide control\r\n   * @returns {boolean}\r\n   */\r\n  collapse(b) {\r\n    if (b === false)\r\n      this.show();\r\n    else\r\n      this.hide();\r\n  }\r\n  /** Is control collapsed\r\n   * @returns {boolean}\r\n   */\r\n  isCollapsed() {\r\n    return (this.element.classList.contains('ol-collapsed'));\r\n  }\r\n  /** Toggle control\r\n   */\r\n  toggle() {\r\n    this.element.classList.toggle('ol-collapsed');\r\n    this.dispatchEvent({ type: 'change:collapse', collapsed: this.element.classList.contains('ol-collapsed') });\r\n    if (this.getMap()) {\r\n      try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ol_control_Legend\r\n", "/*\r\n  Copyright (c) 2019 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport ol_control_Control from 'ol/control/Control.js'\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/** Print control to get an image of the map\r\n * @constructor\r\n * @fire print\r\n * @fire error\r\n * @fire printing\r\n * @extends {ol.control.Control}\r\n * @param {Object=} options Control options.\r\n *\t@param {String} options.className class of the control\r\n *\t@param {String} options.title button title\r\n *\t@param {string} options.imageType A string indicating the image format, default image/jpeg\r\n *\t@param {number} options.quality Number between 0 and 1 indicating the image quality to use for image formats that use lossy compression such as image/jpeg and image/webp\r\n *\t@param {string} options.orientation Page orientation (landscape/portrait), default guest the best one\r\n *\t@param {boolean} options.immediate force print even if render is not complete,  default false\r\n */\r\nvar ol_control_Print = class olcontrolPrint extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    var element = ol_ext_element.create('DIV', {\r\n      className: (options.className || 'ol-print')\r\n    });\r\n    super({\r\n      element: element,\r\n      target: options.target\r\n    });\r\n\r\n    if (!options.target) {\r\n      element.classList.add('ol-unselectable', 'ol-control');\r\n      ol_ext_element.create('BUTTON', {\r\n        type: 'button',\r\n        title: options.title || 'Print',\r\n        click: function () { this.print(); }.bind(this),\r\n        parent: element\r\n      });\r\n    }\r\n\r\n    this.set('immediate', options.immediate);\r\n    this.set('imageType', options.imageType || 'image/jpeg');\r\n    this.set('quality', options.quality || .8);\r\n    this.set('orientation', options.orientation);\r\n  }\r\n  /** Helper function to copy result to clipboard\r\n   * @param {Event} e print event\r\n   * @return {boolean}\r\n   * @private\r\n   */\r\n  toClipboard(e, callback) {\r\n    try {\r\n      e.canvas.toBlob(function (blob) {\r\n        try {\r\n          navigator.clipboard.write([\r\n            new window.ClipboardItem(\r\n              Object.defineProperty({}, blob.type, {\r\n                value: blob,\r\n                enumerable: true\r\n              })\r\n            )\r\n          ]);\r\n          if (typeof (callback) === 'function')\r\n            callback(true);\r\n        } catch (err) {\r\n          if (typeof (callback) === 'function')\r\n            callback(false);\r\n        }\r\n      });\r\n    } catch (err) {\r\n      if (typeof (callback) === 'function')\r\n        callback(false);\r\n    }\r\n  }\r\n  /** Helper function to copy result to clipboard\r\n   * @param {any} options print options\r\n   * @param {function} callback a callback function that takes a boolean if copy\r\n   */\r\n  copyMap(options, callback) {\r\n    this.once('print', function (e) {\r\n      this.toClipboard(e, callback);\r\n    }.bind(this));\r\n    this.print(options);\r\n  }\r\n  /** Get map canvas\r\n   * @private\r\n   */\r\n  _getCanvas(event, imageType, canvas) {\r\n    var ctx;\r\n    // ol <= 5 : get the canvas\r\n    if (event.context) {\r\n      canvas = event.context.canvas;\r\n    } else {\r\n      // Create a canvas if none\r\n      if (!canvas) {\r\n        canvas = document.createElement('canvas');\r\n        var size = this.getMap().getSize();\r\n        canvas.width = size[0];\r\n        canvas.height = size[1];\r\n        ctx = canvas.getContext('2d');\r\n        if (/jp.*g$/.test(imageType)) {\r\n          ctx.fillStyle = this.get('bgColor') || 'white';\r\n          ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        }\r\n      } else {\r\n        ctx = canvas.getContext('2d');\r\n      }\r\n      // ol6+ : create canvas using layer canvas\r\n      this.getMap().getViewport().querySelectorAll('.ol-layers canvas, canvas.ol-fixedoverlay').forEach(function (c) {\r\n        if (c.width) {\r\n          ctx.save();\r\n          // opacity\r\n          if (c.parentNode.style.opacity === '0')\r\n            return;\r\n          ctx.globalAlpha = parseFloat(c.parentNode.style.opacity) || 1;\r\n          // Blend mode & filter\r\n          ctx.globalCompositeOperation = ol_ext_element.getStyle(c.parentNode, 'mix-blend-mode');\r\n          ctx.filter = ol_ext_element.getStyle(c.parentNode, 'filter');\r\n          // transform\r\n          var tr = ol_ext_element.getStyle(c, 'transform') || ol_ext_element.getStyle(c, '-webkit-transform');\r\n          if (/^matrix/.test(tr)) {\r\n            tr = tr.replace(/^matrix\\(|\\)$/g, '').split(',');\r\n            tr.forEach(function (t, i) { tr[i] = parseFloat(t); });\r\n            ctx.transform(tr[0], tr[1], tr[2], tr[3], tr[4], tr[5]);\r\n            ctx.drawImage(c, 0, 0);\r\n          } else {\r\n            ctx.drawImage(c, 0, 0, ol_ext_element.getStyle(c, 'width'), ol_ext_element.getStyle(c, 'height'));\r\n          }\r\n          ctx.restore();\r\n        }\r\n      }.bind(this));\r\n    }\r\n    return canvas;\r\n  }\r\n  /** Fast print\r\n   * @param {*} options print options\r\n   *  @param {HTMLCanvasElement|undefined} [options.canvas] if none create one, only for ol@6+\r\n   *  @parama {string} options.imageType\r\n   */\r\n  fastPrint(options, callback) {\r\n    options = options || {};\r\n    if (this._ol6) {\r\n      requestAnimationFrame(function () {\r\n        callback(this._getCanvas({}, options.imageType, options.canvas));\r\n      }.bind(this));\r\n    } else {\r\n      this.getMap().once('postcompose', function (event) {\r\n        if (!event.context)\r\n          this._ol6 = true;\r\n        callback(this._getCanvas(event, options.imageType, options.canvas));\r\n      }.bind(this));\r\n      this.getMap().render();\r\n    }\r\n  }\r\n  /** Print the map\r\n   * @param {Object} options\r\n   *\t@param {string} options.imageType A string indicating the image format, default the control one\r\n   *\t@param {number} options.quality Number between 0 and 1 indicating the image quality to use for image formats that use lossy compression such as image/jpeg and image/webp\r\n   *  @param {boolean} options.immediate true to prevent delay for printing\r\n   *  @param {boolean} [options.size=[210,297]]\r\n   *  @param {boolean} [options.format=a4]\r\n   *  @param {boolean} [options.orient] default control orientation\r\n   *  @param {boolean} [options.margin=10]\r\n   *  @param {*} options.any any options passed to the print event when fired\r\n   * @api\r\n   */\r\n  print(options) {\r\n    options = options || {};\r\n\r\n    var imageType = options.imageType || this.get('imageType');\r\n    var quality = options.quality || this.get('quality');\r\n    if (this.getMap()) {\r\n      if (options.immediate !== 'silent') {\r\n        this.dispatchEvent(Object.assign({\r\n          type: 'printing',\r\n        }, options));\r\n      }\r\n      // Start printing after delay to let user show info in the DOM\r\n      if (!options.immediate) {\r\n        setTimeout(function () {\r\n          options = Object.assign({}, options);\r\n          options.immediate = 'silent';\r\n          this.print(options);\r\n        }.bind(this), 200);\r\n        return;\r\n      }\r\n      // Run printing\r\n      this.getMap().once(this.get('immediate') ? 'postcompose' : 'rendercomplete', function (event) {\r\n        var canvas = this._getCanvas(event, imageType);\r\n        // Calculate print format\r\n        var size = options.size || [210, 297];\r\n        var format = options.format || 'a4';\r\n        var w, h, position;\r\n        var orient = options.orient || this.get('orientation');\r\n        var margin = typeof (options.margin) === 'number' ? options.margin : 10;\r\n        if (canvas) {\r\n          // Calculate size\r\n          if (orient !== 'landscape' && orient !== 'portrait') {\r\n            orient = (canvas.width > canvas.height) ? 'landscape' : 'portrait';\r\n          }\r\n          if (orient === 'landscape')\r\n            size = [size[1], size[0]];\r\n          var sc = Math.min((size[0] - 2 * margin) / canvas.width, (size[1] - 2 * margin) / canvas.height);\r\n          w = sc * canvas.width;\r\n          h = sc * canvas.height;\r\n          // Image position\r\n          position = [(size[0] - w) / 2, (size[1] - h) / 2];\r\n        }\r\n        // get the canvas image\r\n        var image;\r\n        try {\r\n          image = canvas ? canvas.toDataURL(imageType, quality) : null;\r\n        } catch (e) {\r\n          // Fire error event\r\n          this.dispatchEvent({\r\n            type: 'error',\r\n            canvas: canvas\r\n          });\r\n          return;\r\n        }\r\n        // Fire print event\r\n        var e = Object.assign({\r\n          type: 'print',\r\n          print: {\r\n            format: format,\r\n            orientation: orient,\r\n            unit: 'mm',\r\n            size: size,\r\n            position: position,\r\n            imageWidth: w,\r\n            imageHeight: h\r\n          },\r\n          image: image,\r\n          imageType: imageType,\r\n          quality: quality,\r\n          canvas: canvas\r\n        }, options);\r\n        this.dispatchEvent(e);\r\n      }.bind(this));\r\n      this.getMap().render();\r\n    }\r\n  }\r\n}\r\n\r\nexport default ol_control_Print\r\n", "/*\tCopyright (c) 2015 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport {asString as ol_color_asString} from 'ol/color.js'\r\n\r\nimport ol_control_CanvasBase from './CanvasBase.js'\r\nimport ol_ext_element from '../util/element.js'\r\n\r\n/**\r\n * A title Control integrated in the canvas (for jpeg/png export purposes).\r\n *\r\n * @constructor\r\n * @extends {ol_control_CanvasBase}\r\n * @param {Object=} options extend the ol.control options. \r\n *  @param {string} [options.title] the title, default 'Title'\r\n *  @param {boolean} [options.visible=true]\r\n *  @param {ol_style_Style} [options.style] style used to draw the title (with a text).\r\n */\r\nvar ol_control_CanvasTitle = class olcontrolCanvasTitle extends ol_control_CanvasBase {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    var elt = ol_ext_element.create('DIV', {\r\n      className: (options.className || '') + ' ol-control-title ol-unselectable',\r\n      style: {\r\n        display: 'block',\r\n        visibility: 'hidden'\r\n      }\r\n    });\r\n\r\n    super({\r\n      element: elt,\r\n      style: options.style\r\n    });\r\n\r\n    this.setTitle(options.title || '');\r\n    this.setVisible(options.visible !== false);\r\n    this.element.style.font = this.getTextFont();\r\n  }\r\n  /**\r\n   * Change the control style\r\n   * @param {ol_style_Style} style\r\n   */\r\n  setStyle(style) {\r\n    super.setStyle(style);\r\n    // Element style\r\n    if (this.element) {\r\n      this.element.style.font = this.getTextFont();\r\n    }\r\n    // refresh\r\n    if (this.getMap()) this.getMap().render();\r\n  }\r\n  /**\r\n   * Set the map title\r\n   * @param {string} map title.\r\n   * @api stable\r\n   */\r\n  setTitle(title) {\r\n    this.element.textContent = title;\r\n    this.set('title', title);\r\n    if (this.getMap()) {\r\n      try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n    }\r\n  }\r\n  /**\r\n   * Get the map title\r\n   * @param {string} map title.\r\n   * @api stable\r\n   */\r\n  getTitle() {\r\n    return this.get('title');\r\n  }\r\n  /**\r\n   * Set control visibility\r\n   * @param {bool} b\r\n   * @api stable\r\n   */\r\n  setVisible(b) {\r\n    this.element.style.display = (b ? 'block' : 'none');\r\n    if (this.getMap()) {\r\n      try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n    }\r\n  }\r\n  /**\r\n   * Get control visibility\r\n   * @return {bool}\r\n   * @api stable\r\n   */\r\n  getVisible() {\r\n    return this.element.style.display !== 'none';\r\n  }\r\n  /** Draw title in the final canvas\r\n   * @private\r\n  */\r\n  _draw(e) {\r\n    if (!this.getVisible())\r\n      return;\r\n    var ctx = this.getContext(e);\r\n    if (!ctx)\r\n      return;\r\n\r\n    // Retina device\r\n    var ratio = e.frameState.pixelRatio;\r\n    ctx.save();\r\n    ctx.scale(ratio, ratio);\r\n    // Position\r\n    var eltRect = this.element.getBoundingClientRect();\r\n    var mapRect = this.getMap().getViewport().getBoundingClientRect();\r\n    var sc = this.getMap().getSize()[0] / mapRect.width;\r\n    ctx.translate(\r\n      Math.round((eltRect.left - mapRect.left) * sc),\r\n      Math.round((eltRect.top - mapRect.top) * sc)\r\n    );\r\n\r\n    var h = this.element.clientHeight;\r\n    var w = this.element.clientWidth;\r\n    var left = w / 2;\r\n\r\n    ctx.beginPath();\r\n    ctx.fillStyle = ol_color_asString(this.getFill().getColor());\r\n    ctx.rect(0, 0, w, h);\r\n    ctx.fill();\r\n    ctx.closePath();\r\n\r\n    ctx.beginPath();\r\n    ctx.fillStyle = ol_color_asString(this.getTextFill().getColor());\r\n    ctx.strokeStyle = ol_color_asString(this.getTextStroke().getColor());\r\n    ctx.lineWidth = this.getTextStroke().getWidth();\r\n    ctx.textAlign = 'center';\r\n    ctx.textBaseline = 'middle';\r\n    ctx.font = this.getTextFont();\r\n    ctx.lineJoin = 'round';\r\n    if (ctx.lineWidth) ctx.strokeText(this.getTitle(), left, h / 2);\r\n    ctx.fillText(this.getTitle(), left, h / 2);\r\n    ctx.closePath();\r\n\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nexport default ol_control_CanvasTitle\r\n", "import {getDistance as ol_sphere_getDistance} from 'ol/sphere.js'\r\nimport {transform as ol_proj_transform} from 'ol/proj.js'\r\n\r\n/** Compute great circle bearing of two points.\r\n * @See http://www.movable-type.co.uk/scripts/latlong.html for the original code\r\n * @param {ol.coordinate} origin origin in lonlat\r\n * @param {ol.coordinate} destination destination in lonlat\r\n * @return {number} bearing angle in radian\r\n */\r\nvar ol_sphere_greatCircleBearing = function(origin, destination) {\r\n  var toRad = Math.PI/180;\r\n  var ori = [ origin[0]*toRad, origin[1]*toRad ];\r\n  var dest = [ destination[0]*toRad, destination[1]*toRad ];\r\n\r\n  var bearing = Math.atan2(\r\n    Math.sin(dest[0] - ori[0]) * Math.cos(dest[1]),\r\n    Math.cos(ori[1]) * Math.sin(dest[1]) - Math.sin(ori[1]) * Math.cos(dest[1]) * Math.cos(dest[0] - ori[0])\r\n  );\r\n  return bearing;\r\n};\r\n\r\nexport {ol_sphere_greatCircleBearing as greatCircleBearing}\r\n\r\n/** \r\n * Computes the destination point given an initial point, a distance and a bearing\r\n * @See http://www.movable-type.co.uk/scripts/latlong.html for the original code\r\n * @param {ol.coordinate} origin stating point in lonlat coords\r\n * @param {number} distance\r\n * @param {number} bearing bearing angle in radian\r\n * @param {*} options\r\n *  @param {booelan} normalize normalize longitude beetween -180/180, deafulet true\r\n *  @param {number|undefined} options.radius sphere radius, default 6371008.8\r\n */\r\nvar ol_sphere_computeDestinationPoint = function(origin, distance, bearing, options) {\r\n  options = options || {};\r\n  var toRad = Math.PI/180;\r\n  var radius = options.radius || 6371008.8;\r\n\r\n  var phi1 = origin[1] * toRad;\r\n  var lambda1 = origin[0] * toRad;\r\n  var delta = distance / radius;\r\n\r\n  var phi2 = Math.asin(\r\n    Math.sin(phi1) * Math.cos(delta) +\r\n    Math.cos(phi1) * Math.sin(delta) * Math.cos(bearing)\r\n  );\r\n\r\n  var lambda2 = lambda1 +\r\n    Math.atan2(\r\n      Math.sin(bearing) * Math.sin(delta) * Math.cos(phi1),\r\n      Math.cos(delta) - Math.sin(phi1) * Math.sin(phi2)\r\n    );\r\n\r\n  var lon = lambda2 / toRad;\r\n  // normalise to >=-180 and <=180° \r\n  if (options.normalize!==false && (lon < -180 || lon > 180)) {\r\n    lon = ((lon * 540) % 360) - 180;\r\n  }\r\n\r\n  return [ lon, phi2 / toRad ];\r\n};\r\n\r\nexport {ol_sphere_computeDestinationPoint as computeDestinationPoint}\r\n\r\n/** Calculate a track along the great circle given an origin and a destination\r\n * @param {ol.coordinate} origin origin in lonlat\r\n * @param {ol.coordinate} destination destination in lonlat\r\n * @param {number} distance distance between point along the track in meter, default 1km (1000)\r\n * @param {number|undefined} radius sphere radius, default 6371008.8\r\n * @return {Array<ol.coordinate>}\r\n */\r\nvar ol_sphere_greatCircleTrack = function(origin, destination, options) {\r\n  options = options || {};\r\n  var bearing = ol_sphere_greatCircleBearing(origin, destination);\r\n  var dist = ol_sphere_getDistance(origin, destination, options.radius);\r\n  var distance = options.distance || 1000;\r\n  var d = distance;\r\n  var geom = [origin];\r\n  while (d < dist) {\r\n    geom.push(ol_sphere_computeDestinationPoint(origin, d, bearing, { radius: options.radius, normalize: false }));\r\n    d += distance;\r\n  }\r\n  var pt = ol_sphere_computeDestinationPoint(origin, dist, bearing, { radius: options.radius, normalize: false });\r\n  if (Math.abs(pt[0]-destination[0]) > 1) {\r\n    if (pt[0] > destination[0]) destination[0] += 360;\r\n    else destination[0] -= 360;\r\n  } \r\n  geom.push(destination);\r\n  return geom;\r\n};\r\n\r\nexport {ol_sphere_greatCircleTrack as greatCircleTrack}\r\n\r\n/** Get map scale factor\r\n * @param {ol_Map} map\r\n * @param {number} [dpi=96] dpi, default 96\r\n * @return {number}\r\n */\r\nvar ol_sphere_getMapScale = function (map, dpi) {\r\n  var view = map.getView();\r\n  var proj = view.getProjection();\r\n  var center = view.getCenter();\r\n  var px = map.getPixelFromCoordinate(center);\r\n  px[1] += 1;\r\n  var coord = map.getCoordinateFromPixel(px);\r\n  var d = ol_sphere_getDistance(\r\n    ol_proj_transform(center, proj, 'EPSG:4326'),\r\n    ol_proj_transform(coord, proj, 'EPSG:4326'));\r\n  d *= (dpi||96) /.0254\r\n  return d;\r\n};\r\nexport {ol_sphere_getMapScale as getMapScale}\r\n\r\n/** Set map scale factor\r\n * @param {ol_Map} map\r\n * @param {number|string} scale the scale factor or a scale string as 1/xxx\r\n * @param {number} [dpi=96] dpi, default 96\r\n * @return {number} scale factor\r\n */\r\nvar ol_sphere_setMapScale = function (map, scale, dpi) {\r\n  if (map && scale) {\r\n    var fac = scale;\r\n    if (typeof(scale)==='string') {\r\n      scale = scale.replace(':','/').split('/');\r\n      fac = scale[1];\r\n      if (!fac) fac = scale[0] || '';\r\n      fac = fac.replace(/[^\\d]/g,'');\r\n      fac = parseInt(fac);\r\n      if (scale[1]) {\r\n        var num = parseInt(scale[0]);\r\n        if (num) fac /= num;\r\n      }\r\n    }\r\n    if (!fac) return;\r\n    // Calculate new resolution\r\n    var view = map.getView();\r\n    var proj = view.getProjection();\r\n    var center = view.getCenter();\r\n    var px = map.getPixelFromCoordinate(center);\r\n    px[1] += 1;\r\n    var coord = map.getCoordinateFromPixel(px);\r\n    var d = ol_sphere_getDistance(\r\n      ol_proj_transform(center, proj, 'EPSG:4326'),\r\n      ol_proj_transform(coord, proj, 'EPSG:4326'));\r\n    d *= (dpi || 96) /.0254\r\n    view.setResolution(view.getResolution()*fac/d);\r\n    return fac;\r\n  }\r\n};\r\nexport {ol_sphere_setMapScale as setMapScale}\r\n", "/*\tCopyright (c) 2017 Jean-Marc VIGLINO, \r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport ol_control_CanvasBase from './CanvasBase.js'\r\nimport ol_style_Style from 'ol/style/Style.js'\r\nimport ol_style_Stroke from 'ol/style/Stroke.js'\r\nimport ol_ext_element from '../util/element.js';\r\n\r\n/**\r\n * Draw a compass on the map. The position/size of the control is defined in the css.\r\n *\r\n * @constructor\r\n * @extends {ol_control_CanvasBase}\r\n * @param {Object=} options Control options. The style {_ol_style_Stroke_} option is usesd to draw the text.\r\n *  @param {string} options.className class name for the control\r\n *  @param {boolean} [options.visible=true]\r\n *  @param {Image} options.image an image, default use the src option or a default image\r\n *  @param {string} options.src image src or 'default' or 'compact', default use the image option or a default image\r\n *  @param {boolean} options.rotateVithView rotate vith view (false to show watermark), default true\r\n *  @param {ol_style_Stroke} options.style style to draw the lines, default draw no lines\r\n */\r\nvar ol_control_Compass = class olcontrolCompass extends ol_control_CanvasBase {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    // Initialize parent\r\n    var elt = document.createElement(\"div\");\r\n    elt.className = \"ol-control ol-compassctrl ol-unselectable ol-hidden\" + (options.className ? \" \" + options.className : \"\");\r\n    elt.style.position = \"absolute\";\r\n    elt.style.visibility = \"hidden\";\r\n\r\n    var style = (options.style instanceof ol_style_Stroke) ? new ol_style_Style({ stroke: options.style }) : options.style;\r\n    if (!options.style) {\r\n      style = new ol_style_Style({ stroke: new ol_style_Stroke({ width: 0 }) });\r\n    }\r\n    super({\r\n      element: elt,\r\n      style: style\r\n    });\r\n\r\n    this.set('rotateVithView', options.rotateWithView !== false);\r\n    this.setVisible(options.visible !== false);\r\n\r\n    this.setImage(options.image || options.src);\r\n  }\r\n  /** Set compass image\r\n   * @param {Image|string} [img=default] the image or an url or 'compact' or 'default'\r\n   */\r\n  setImage(img) {\r\n    // The image\r\n    if (img instanceof Image) {\r\n      this.img_ = img;\r\n      this.img_.onload = function () {\r\n        if (this.getMap()) {\r\n          try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n        }\r\n      }.bind(this);\r\n    } else if (typeof (img) === 'string') {\r\n      // Load source\r\n      switch (img) {\r\n        case 'compact': {\r\n          this.img_ = this.compactCompass_(this.element.clientWidth, this.getStroke().getColor());\r\n          break;\r\n        }\r\n        case 'default': {\r\n          this.img_ = this.defaultCompass_(this.element.clientWidth, this.getStroke().getColor());\r\n          break;\r\n        }\r\n        default: {\r\n          this.img_ = new Image();\r\n          this.img_.onload = function () {\r\n            if (this.getMap()) {\r\n              try { this.getMap().renderSync(); } catch (e) { /* ok */ }\r\n            }\r\n          }.bind(this);\r\n          this.img_.src = img;\r\n          break;\r\n        }\r\n      }\r\n    } else {\r\n      this.img_ = this.defaultCompass_(this.element.clientWidth, this.getStroke().getColor());\r\n    }\r\n  }\r\n  /** Create a default image.\r\n   * @param {number} s the size of the compass\r\n   * @private\r\n   */\r\n  compactCompass_(s, color) {\r\n    var canvas = document.createElement('canvas');\r\n    var ctx = canvas.getContext(\"2d\");\r\n    s = canvas.width = canvas.height = s || 150;\r\n    var r = s / 2;\r\n\r\n    ctx.translate(r, r);\r\n    ctx.fillStyle = color || '#963';\r\n    ctx.lineWidth = 5;\r\n    ctx.lineJoin = ctx.lineCap = 'round';\r\n\r\n    ctx.font = 'bold ' + (r * 0.4) + 'px sans-serif';\r\n    ctx.textBaseline = 'bottom';\r\n    ctx.textAlign = 'center';\r\n    ctx.strokeStyle = '#fff';\r\n    ctx.globalAlpha = .75;\r\n    ctx.strokeText('N', 0, -r / 2);\r\n    ctx.globalAlpha = 1;\r\n    ctx.fillText('N', 0, -r / 2);\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, r / 4);\r\n    ctx.lineTo(r / 3, r / 2);\r\n    ctx.lineTo(0, -r / 2);\r\n    ctx.lineTo(-r / 3, r / 2);\r\n    ctx.lineTo(0, r / 4);\r\n    ctx.lineWidth = 12;\r\n    ctx.fillStyle = \"#fff\";\r\n    ctx.globalAlpha = .75;\r\n    ctx.fill();\r\n    ctx.stroke();\r\n    ctx.globalAlpha = 1;\r\n\r\n    ctx.fillStyle = ctx.strokeStyle = color || '#963';\r\n    ctx.lineWidth = 5;\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, r / 4);\r\n    ctx.lineTo(0, -r / 2);\r\n    ctx.lineTo(r / 3, r / 2);\r\n    ctx.lineTo(0, r / 4);\r\n    ctx.fill();\r\n    ctx.stroke();\r\n\r\n    ctx.beginPath();\r\n    ctx.moveTo(0, r / 4);\r\n    ctx.lineTo(0, -r / 2);\r\n    ctx.lineTo(-r / 3, r / 2);\r\n    ctx.lineTo(0, r / 4);\r\n    ctx.stroke();\r\n\r\n    return canvas;\r\n  }\r\n  /** Create a default image.\r\n   * @param {number} s the size of the compass\r\n   * @private\r\n   */\r\n  defaultCompass_(s, color) {\r\n    var canvas = document.createElement('canvas');\r\n    var ctx = canvas.getContext(\"2d\");\r\n    s = canvas.width = canvas.height = s || 150;\r\n    var r = s / 2;\r\n    var r2 = 0.22 * r;\r\n\r\n    function draw(r, r2) {\r\n      ctx.fillStyle = color || \"#963\";\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(r, 0); ctx.lineTo(r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(-r, 0); ctx.lineTo(-r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, r); ctx.lineTo(-r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -r); ctx.lineTo(r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.fill();\r\n      ctx.stroke();\r\n    }\r\n\r\n    function draw2(r, r2) {\r\n      ctx.globalCompositeOperation = \"destination-out\";\r\n      ctx.fillStyle = \"#fff\";\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(r, 0); ctx.lineTo(r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(-r, 0); ctx.lineTo(-r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, r); ctx.lineTo(r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -r); ctx.lineTo(-r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.fill();\r\n      ctx.globalCompositeOperation = \"source-over\";\r\n      ctx.beginPath();\r\n      ctx.moveTo(0, 0);\r\n      ctx.lineTo(r, 0); ctx.lineTo(r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(-r, 0); ctx.lineTo(-r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, r); ctx.lineTo(r2, r2); ctx.moveTo(0, 0);\r\n      ctx.lineTo(0, -r); ctx.lineTo(-r2, -r2); ctx.moveTo(0, 0);\r\n      ctx.stroke();\r\n    }\r\n\r\n    ctx.translate(r, r);\r\n    ctx.strokeStyle = color || \"#963\";\r\n    ctx.lineWidth = 1.5;\r\n    ctx.beginPath();\r\n    ctx.arc(0, 0, s * 0.41, 0, 2 * Math.PI);\r\n    ctx.arc(0, 0, s * 0.44, 0, 2 * Math.PI);\r\n    ctx.stroke();\r\n\r\n    ctx.rotate(Math.PI / 4);\r\n    draw(r * 0.9, r2 * 0.8);\r\n    draw2(r * 0.9, r2 * 0.8);\r\n\r\n    ctx.rotate(-Math.PI / 4);\r\n    draw(r, r2);\r\n    draw2(r, r2);\r\n\r\n    return canvas;\r\n  }\r\n  /** Get control visibility\r\n   * @return {boolean}\r\n   */\r\n  getVisible() {\r\n    return ol_ext_element.getStyle(this.element, 'display') === 'block';\r\n  }\r\n  /** Set visibility\r\n   * @param {boolean} b\r\n   */\r\n  setVisible(b) {\r\n    if (b)\r\n      this.element.classList.add('ol-visible');\r\n    else\r\n      this.element.classList.remove('ol-visible');\r\n    if (this.getMap())\r\n      this.getMap().render();\r\n  }\r\n  /** Draw compass\r\n  * @param {ol.event} e postcompose event\r\n  * @private\r\n  */\r\n  _draw(e) {\r\n    var ctx = this.getContext(e);\r\n    if (!ctx || !this.getVisible())\r\n      return;\r\n    var canvas = ctx.canvas;\r\n\r\n    // 8 angles\r\n    var i, da = [];\r\n    for (i = 0; i < 8; i++)\r\n      da[i] = [Math.cos(Math.PI * i / 8), Math.sin(Math.PI * i / 8)];\r\n\r\n    // Retina device\r\n    var ratio = e.frameState.pixelRatio;\r\n    ctx.save();\r\n    ctx.scale(ratio, ratio);\r\n\r\n    var w = this.element.clientWidth;\r\n    var h = this.element.clientHeight;\r\n    var pos = { left: this.element.offsetLeft, top: this.element.offsetTop };\r\n\r\n    var compass = this.img_;\r\n    var rot = e.frameState.viewState.rotation;\r\n\r\n    ctx.beginPath();\r\n    ctx.translate(pos.left + w / 2, pos.top + h / 2);\r\n    if (this.get('rotateVithView'))\r\n      ctx.rotate(rot);\r\n    if (this.getStroke().getWidth()) {\r\n      ctx.beginPath();\r\n      ctx.strokeStyle = this.getStroke().getColor();\r\n      ctx.lineWidth = this.getStroke().getWidth();\r\n      var m = Math.max(canvas.width, canvas.height);\r\n      for (i = 0; i < 8; i++) {\r\n        ctx.moveTo(-da[i][0] * m, -da[i][1] * m);\r\n        ctx.lineTo(da[i][0] * m, da[i][1] * m);\r\n      }\r\n      ctx.stroke();\r\n    }\r\n\r\n    if (compass.width) {\r\n      ctx.drawImage(compass, -w / 2, -h / 2, w, h);\r\n    }\r\n\r\n    ctx.closePath();\r\n\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nexport default ol_control_Compass", "/*\r\n  Copyright (c) 2019 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\n\r\nimport {unByKey as ol_Observable_unByKey} from 'ol/Observable.js'\r\nimport ol_control_Control from 'ol/control/Control.js'\r\nimport ol_style_Stroke from 'ol/style/Stroke.js'\r\nimport ol_ext_element from '../util/element.js'\r\nimport ol_control_Dialog from './Dialog.js'\r\nimport ol_control_Legend from './Legend.js'\r\nimport ol_control_Print from './Print.js'\r\nimport ol_control_CanvasTitle from './CanvasTitle.js'\r\nimport {getMapScale as ol_sphere_getMapScale} from '../geom/sphere.js'\r\nimport {setMapScale as ol_sphere_setMapScale} from '../geom/sphere.js'\r\nimport ol_control_Compass from './Compass.js';\r\n\r\n/** Print control to get an image of the map\r\n * @constructor\r\n * @fire show\r\n * @fire print\r\n * @fire error\r\n * @fire printing\r\n * @extends {ol.control.Control}\r\n * @param {Object=} options Control options.\r\n *\t@param {string} options.className class of the control\r\n *\t@param {String} options.title button title\r\n *  @param {string} [options.lang=en] control language, default en\r\n *  @param {HTMLElement|string|undefined} [options.target] target element to render the control button outside of the map's viewport\r\n *  @param {HTMLElement|string|undefined} [options.targetDialog] target element for the dialog, default document body\r\n *\t@param {string} options.imageType A string indicating the image format, default image/jpeg\r\n *\t@param {number} options.quality Number between 0 and 1 indicating the image quality to use for image formats that use lossy compression such as image/jpeg and image/webp\r\n *\t@param {string} options.orientation Page orientation (landscape/portrait), default guest the best one\r\n *\t@param {boolean} options.immediate force print even if render is not complete,  default false\r\n *\t@param {boolean} [options.openWindow=false] open the file in a new window on print\r\n *\t@param {boolean} [options.copy=true] add a copy to clipboard select option\r\n *\t@param {boolean} [options.save=true] add a save select option\r\n *\t@param {boolean} [options.pdf=true] add a pdf select option\r\n *\t@param {function} [options.saveAs] a function to save the image as blob\r\n *\t@param {*} [options.jsPDF] jsPDF object to save map as pdf\r\n */\r\nvar ol_control_PrintDialog = class olcontrolPrintDialog extends ol_control_Control {\r\n  constructor(options) {\r\n    options = options || {}\r\n    \r\n    var element = ol_ext_element.create('DIV', {\r\n      className: (options.className || 'ol-print') + ' ol-unselectable ol-control'\r\n    })\r\n    super({\r\n      element: element\r\n    })\r\n    \r\n    this._lang = options.lang || 'en'\r\n    if (!options.target) {\r\n      ol_ext_element.create('BUTTON', {\r\n        type: 'button',\r\n        title: options.title || 'Print',\r\n        click: function () {\r\n          this.print()\r\n        }.bind(this),\r\n        parent: element\r\n      })\r\n    }\r\n    // Open in a new window\r\n    if (options.openWindow) {\r\n      this.on('print', function (e) {\r\n        // Print success\r\n        if (e.canvas) {\r\n          window.open().document.write('<img src=\"' + e.canvas.toDataURL() + '\"/>')\r\n        }\r\n      })\r\n    }\r\n\r\n    // Print control\r\n    options.target = ol_ext_element.create('DIV')\r\n    var printCtrl = this._printCtrl = new ol_control_Print(options)\r\n    printCtrl.on(['print', 'error', 'printing'], function (e) {\r\n      this._printing(e)\r\n    }.bind(this))\r\n\r\n    // North arrow\r\n    this._compass = new ol_control_Compass({\r\n      src: options.northImage || 'compact',\r\n      visible: false,\r\n      className: 'olext-print-compass',\r\n      style: new ol_style_Stroke({ color: '#333', width: 0 })\r\n    })\r\n\r\n    // Print dialog\r\n    var printDialog = this._printDialog = new ol_control_Dialog({\r\n      target: options.targetDialog || document.body,\r\n      closeBox: true,\r\n      className: 'ol-ext-print-dialog'\r\n    })\r\n    var content = printDialog.getContentElement()\r\n    this._input = {}\r\n    var param = ol_ext_element.create('DIV', {\r\n      className: 'ol-print-param',\r\n      parent: content\r\n    })\r\n    this._pages = [ol_ext_element.create('DIV', {\r\n      className: 'ol-page'\r\n    })]\r\n    var printMap = ol_ext_element.create('DIV', {\r\n      className: 'ol-map',\r\n      parent: this._pages[0]\r\n    })\r\n    ol_ext_element.create('DIV', {\r\n      html: this._pages[0],\r\n      className: 'ol-print-map',\r\n      parent: content\r\n    })\r\n    ol_ext_element.create('H2', {\r\n      html: this.i18n('title'),\r\n      parent: param\r\n    })\r\n    var ul = ol_ext_element.create('UL', { parent: param })\r\n\r\n    // Orientation\r\n    var li = ol_ext_element.create('LI', {\r\n      /*\r\n      html: ol_ext_element.create('LABEL', {\r\n        html: this.18n('orientation')\r\n      }),\r\n      */\r\n      className: 'ol-orientation',\r\n      parent: ul\r\n    })\r\n\r\n    this._input.orientation = { list: li }\r\n    var label = ol_ext_element.create('LABEL', {\r\n      className: 'portrait',\r\n      parent: li\r\n    })\r\n    this._input.orientation.portrait = ol_ext_element.create('INPUT', {\r\n      type: 'radio',\r\n      name: 'ol-print-orientation',\r\n      value: 'portrait',\r\n      checked: true,\r\n      on: {\r\n        change: function (e) {\r\n          this.setOrientation(e.target.value)\r\n        }.bind(this)\r\n      },\r\n      parent: label\r\n    })\r\n    ol_ext_element.create('SPAN', {\r\n      html: this.i18n('portrait'),\r\n      parent: label\r\n    })\r\n\r\n    label = ol_ext_element.create('LABEL', {\r\n      className: 'landscape',\r\n      parent: li\r\n    })\r\n    this._input.orientation.landscape = ol_ext_element.create('INPUT', {\r\n      type: 'radio',\r\n      name: 'ol-print-orientation',\r\n      value: 'landscape',\r\n      on: {\r\n        change: function (e) {\r\n          this.setOrientation(e.target.value)\r\n        }.bind(this)\r\n      },\r\n      parent: label\r\n    })\r\n    ol_ext_element.create('SPAN', {\r\n      html: this.i18n('landscape'),\r\n      parent: label\r\n    })\r\n\r\n    // Page size\r\n    var s\r\n    li = ol_ext_element.create('LI', {\r\n      html: ol_ext_element.create('LABEL', {\r\n        html: this.i18n('size'),\r\n      }),\r\n      className: 'ol-size',\r\n      parent: ul\r\n    })\r\n    var size = this._input.size = ol_ext_element.create('SELECT', {\r\n      on: {\r\n        change: function () {\r\n          this.setSize(size.value || originalSize)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    for (s in this.paperSize) {\r\n      ol_ext_element.create('OPTION', {\r\n        html: s + (this.paperSize[s] ? ' - ' + this.paperSize[s][0] + 'x' + this.paperSize[s][1] + ' mm' : this.i18n('custom')),\r\n        value: s,\r\n        parent: size\r\n      })\r\n    }\r\n\r\n    // Margin\r\n    li = ol_ext_element.create('LI', {\r\n      html: ol_ext_element.create('LABEL', {\r\n        html: this.i18n('margin'),\r\n      }),\r\n      className: 'ol-margin',\r\n      parent: ul\r\n    })\r\n    var margin = this._input.margin = ol_ext_element.create('SELECT', {\r\n      on: {\r\n        change: function () {\r\n          this.setMargin(margin.value)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    for (s in this.marginSize) {\r\n      ol_ext_element.create('OPTION', {\r\n        html: this.i18n(s) + ' - ' + this.marginSize[s] + ' mm',\r\n        value: this.marginSize[s],\r\n        parent: margin\r\n      })\r\n    }\r\n\r\n    // Scale\r\n    li = ol_ext_element.create('LI', {\r\n      html: ol_ext_element.create('LABEL', {\r\n        html: this.i18n('scale'),\r\n      }),\r\n      className: 'ol-scale',\r\n      parent: ul\r\n    })\r\n    var scale = this._input.scale = ol_ext_element.create('SELECT', {\r\n      on: {\r\n        change: function () {\r\n          this.setScale(parseInt(scale.value))\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    Object.keys(this.scales).forEach(function (s) {\r\n      ol_ext_element.create('OPTION', {\r\n        html: this.scales[s],\r\n        value: s,\r\n        parent: scale\r\n      })\r\n    }.bind(this))\r\n\r\n    // Legend\r\n    li = ol_ext_element.create('LI', {\r\n      className: 'ol-legend',\r\n      parent: ul\r\n    })\r\n    var legend = ol_ext_element.createSwitch({\r\n      html: (this.i18n('legend')),\r\n      checked: false,\r\n      on: {\r\n        change: function () {\r\n          extraCtrl.legend.control.setCanvas(legend.checked)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n\r\n    // North\r\n    li = ol_ext_element.create('LI', {\r\n      className: 'ol-print-north',\r\n      parent: ul\r\n    })\r\n    var north = this._input.north = ol_ext_element.createSwitch({\r\n      html: this.i18n('north'),\r\n      checked: 'checked',\r\n      on: {\r\n        change: function () {\r\n          if (north.checked)\r\n            this._compass.element.classList.add('ol-print-compass')\r\n          else\r\n            this._compass.element.classList.remove('ol-print-compass')\r\n          this.getMap().render()\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n\r\n    // Title\r\n    li = ol_ext_element.create('LI', {\r\n      className: 'ol-print-title',\r\n      parent: ul\r\n    })\r\n    var title = ol_ext_element.createSwitch({\r\n      html: this.i18n('mapTitle'),\r\n      checked: false,\r\n      on: {\r\n        change: function (e) {\r\n          extraCtrl.title.control.setVisible(e.target.checked)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    var titleText = ol_ext_element.create('INPUT', {\r\n      type: 'text',\r\n      placeholder: this.i18n('mapTitle'),\r\n      on: {\r\n        keydown: function (e) {\r\n          if (e.keyCode === 13)\r\n            e.preventDefault()\r\n        },\r\n        keyup: function () {\r\n          extraCtrl.title.control.setTitle(titleText.value)\r\n        },\r\n        change: function () {\r\n          extraCtrl.title.control.setTitle(titleText.value)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n\r\n    // User div element\r\n    var userElt = ol_ext_element.create('DIV', {\r\n      className: 'ol-user-param',\r\n      parent: param\r\n    })\r\n\r\n    // Save as\r\n    li = ol_ext_element.create('LI', {\r\n      className: 'ol-saveas',\r\n      parent: ul\r\n    })\r\n    ol_ext_element.create('DIV', {\r\n      html: this.i18n('copied'),\r\n      className: 'ol-clipboard-copy',\r\n      parent: li\r\n    })\r\n    var save = ol_ext_element.create('SELECT', {\r\n      on: {\r\n        change: function () {\r\n          var saveas = save.value;\r\n          save.value = ''\r\n          // Copy to clipboard\r\n          if (this.formats[saveas].clipboard) {\r\n            if (this._copyMap(saveas)) return;\r\n          } \r\n          // Print to file\r\n          var format = (typeof (this.getSize()) === 'string' ? this.getSize() : null)\r\n          var opt = Object.assign({\r\n            format: format,\r\n            size: format ? this.paperSize[format] : null,\r\n            orient: this.getOrientation(),\r\n            margin: this.getMargin(),\r\n          }, this.formats[saveas])\r\n          // console.log('OPTIONS',opt)\r\n          printCtrl.print(opt)\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    ol_ext_element.create('OPTION', {\r\n      html: this.i18n('saveas'),\r\n      style: { display: 'none' },\r\n      value: '',\r\n      parent: save\r\n    })\r\n    this.formats.forEach(function (format, i) {\r\n      if (format.pdf) {\r\n        if (options.pdf === false) return\r\n      } else if (format.clipboard) {\r\n        if (options.copy === false) return\r\n      } else if (options.save === false) {\r\n        return\r\n      }\r\n      ol_ext_element.create('OPTION', {\r\n        html: this.i18n(format.title),\r\n        value: i,\r\n        parent: save\r\n      })\r\n    }.bind(this))\r\n    // No options\r\n    if (save.querySelectorAll('option').length === 1) {\r\n      save.style.display = 'none';\r\n    }\r\n\r\n    // Save Legend\r\n    li = ol_ext_element.create('LI', {\r\n      className: 'ol-savelegend',\r\n      parent: ul\r\n    })\r\n    var copylegend = ol_ext_element.create('DIV', {\r\n      html: this.i18n('copied'),\r\n      className: 'ol-clipboard-copy',\r\n      parent: li\r\n    })\r\n    var saveLegend = ol_ext_element.create('SELECT', {\r\n      on: {\r\n        change: function () {\r\n          // Print canvas (with white background)\r\n          var clegend = extraCtrl.legend.control.getLegend().getCanvas()\r\n          var canvas = document.createElement('CANVAS')\r\n          canvas.width = clegend.width\r\n          canvas.height = clegend.height\r\n          var ctx = canvas.getContext('2d')\r\n          ctx.fillStyle = '#fff'\r\n          ctx.fillRect(0, 0, canvas.width, canvas.height)\r\n          ctx.drawImage(clegend, 0, 0)\r\n\r\n          // Copy to clipboard\r\n          if (this.formats[saveLegend.value].clipboard) {\r\n            canvas.toBlob(function (blob) {\r\n              try {\r\n                navigator.clipboard.write([\r\n                  new window.ClipboardItem(\r\n                    Object.defineProperty({}, blob.type, {\r\n                      value: blob,\r\n                      enumerable: true\r\n                    })\r\n                  )\r\n                ])\r\n                copylegend.classList.add('visible')\r\n                setTimeout(function () { copylegend.classList.remove('visible') }, 1000)\r\n              } catch (err) { /* errror */ }\r\n            }, 'image/png')\r\n          } else {\r\n            var image\r\n            try {\r\n              image = canvas.toDataURL(this.formats[saveLegend.value].imageType, this.formats[saveLegend.value].quality)\r\n              var format = (typeof (this.getSize()) === 'string' ? this.getSize() : 'A4')\r\n              var w = canvas.width / 96 * 25.4\r\n              var h = canvas.height / 96 * 25.4\r\n              var size = this.paperSize[format]\r\n              if (this.getOrientation() === 'landscape')\r\n                size = [size[1], size[0]]\r\n              var position = [\r\n                (size[0] - w) / 2,\r\n                (size[1] - h) / 2\r\n              ]\r\n              this.dispatchEvent({\r\n                type: 'print',\r\n                print: {\r\n                  legend: true,\r\n                  format: format,\r\n                  orientation: this.getOrientation(),\r\n                  unit: 'mm',\r\n                  size: this.paperSize[format],\r\n                  position: position,\r\n                  imageWidth: w,\r\n                  imageHeight: h\r\n                },\r\n                image: image,\r\n                imageType: this.formats[saveLegend.value].imageType,\r\n                pdf: this.formats[saveLegend.value].pdf,\r\n                quality: this.formats[saveLegend.value].quality,\r\n                canvas: canvas\r\n              })\r\n            } catch (err) { /* error */ }\r\n          }\r\n          saveLegend.value = ''\r\n        }.bind(this)\r\n      },\r\n      parent: li\r\n    })\r\n    ol_ext_element.create('OPTION', {\r\n      html: this.i18n('saveLegend'),\r\n      style: { display: 'none' },\r\n      value: '',\r\n      parent: saveLegend\r\n    })\r\n    this.formats.forEach(function (format, i) {\r\n      ol_ext_element.create('OPTION', {\r\n        html: this.i18n(format.title),\r\n        value: i,\r\n        parent: saveLegend\r\n      })\r\n    }.bind(this))\r\n\r\n    // Print\r\n    var prButtons = ol_ext_element.create('DIV', {\r\n      className: 'ol-ext-buttons',\r\n      parent: param\r\n    })\r\n    ol_ext_element.create('BUTTON', {\r\n      html: this.i18n('printBt'),\r\n      type: 'submit',\r\n      click: function (e) {\r\n        e.preventDefault()\r\n        window.print()\r\n      },\r\n      parent: prButtons\r\n    })\r\n    ol_ext_element.create('BUTTON', {\r\n      html: this.i18n('cancel'),\r\n      type: 'button',\r\n      click: function () { printDialog.hide() },\r\n      parent: prButtons\r\n    })\r\n    ol_ext_element.create('DIV', {\r\n      html: this.i18n('errorMsg'),\r\n      className: 'ol-error',\r\n      parent: param\r\n    })\r\n\r\n    // Handle dialog show/hide\r\n    var originalTarget\r\n    var originalSize\r\n    var scalelistener\r\n    var extraCtrl = {}\r\n    printDialog.on('show', function () {\r\n      // Dialog is showing\r\n      this.dispatchEvent({ type: 'show', userElement: userElt, dialog: this._printDialog, page: this.getPage() })\r\n      //\r\n      var map = this.getMap()\r\n      if (!map)\r\n        return\r\n      // Print document\r\n      document.body.classList.add('ol-print-document')\r\n      originalTarget = map.getTargetElement()\r\n      originalSize = map.getSize()\r\n      if (typeof (this.getSize()) === 'string') {\r\n        this.setSize(this.getSize())\r\n      } else {\r\n        this.setSize(originalSize)\r\n      }\r\n      map.setTarget(printMap)\r\n      // Refresh on move end\r\n      if (scalelistener) ol_Observable_unByKey(scalelistener)\r\n      scalelistener = map.on('moveend', function () {\r\n        this.setScale(ol_sphere_getMapScale(map))\r\n      }.bind(this))\r\n      this.setScale(ol_sphere_getMapScale(map))\r\n      // Get extra controls\r\n      extraCtrl = {}\r\n      this.getMap().getControls().forEach(function (c) {\r\n        if (c instanceof ol_control_Legend) {\r\n          extraCtrl.legend = { control: c }\r\n        }\r\n        if (c instanceof ol_control_CanvasTitle) {\r\n          extraCtrl.title = { control: c }\r\n        }\r\n        if (c instanceof ol_control_Compass) {\r\n          if (extraCtrl.compass) {\r\n            c.element.classList.remove('ol-print-compass')\r\n          } else {\r\n            if (this._input.north.checked)\r\n              c.element.classList.add('ol-print-compass')\r\n            else\r\n              c.element.classList.remove('ol-print-compass')\r\n            this._compass = c\r\n            extraCtrl.compass = { control: c }\r\n          }\r\n        }\r\n      }.bind(this))\r\n      // Show hide title\r\n      if (extraCtrl.title) {\r\n        title.checked = extraCtrl.title.isVisible = extraCtrl.title.control.getVisible()\r\n        titleText.value = extraCtrl.title.control.getTitle()\r\n        title.parentNode.parentNode.classList.remove('hidden')\r\n      } else {\r\n        title.parentNode.parentNode.classList.add('hidden')\r\n      }\r\n      // Show hide legend\r\n      if (extraCtrl.legend) {\r\n        extraCtrl.legend.ison = extraCtrl.legend.control.onCanvas()\r\n        extraCtrl.legend.collapsed = extraCtrl.legend.control.isCollapsed()\r\n        extraCtrl.legend.control.collapse(false)\r\n        saveLegend.parentNode.classList.remove('hidden')\r\n        legend.parentNode.parentNode.classList.remove('hidden')\r\n        legend.checked = !extraCtrl.legend.collapsed\r\n        extraCtrl.legend.control.setCanvas(!extraCtrl.legend.collapsed)\r\n      } else {\r\n        saveLegend.parentNode.classList.add('hidden')\r\n        legend.parentNode.parentNode.classList.add('hidden')\r\n      }\r\n    }.bind(this))\r\n\r\n    printDialog.on('hide', function () {\r\n      // No print\r\n      document.body.classList.remove('ol-print-document')\r\n      if (!originalTarget) return\r\n      this.getMap().setTarget(originalTarget)\r\n      originalTarget = null\r\n      if (scalelistener) ol_Observable_unByKey(scalelistener)\r\n      // restore\r\n      if (extraCtrl.title) {\r\n        extraCtrl.title.control.setVisible(extraCtrl.title.isVisible)\r\n      }\r\n      if (extraCtrl.legend) {\r\n        extraCtrl.legend.control.setCanvas(extraCtrl.legend.ison)\r\n        extraCtrl.legend.control.collapse(extraCtrl.legend.collapsed)\r\n      }\r\n      this.dispatchEvent({ type: 'hide' })\r\n    }.bind(this))\r\n\r\n    // Update preview on resize\r\n    window.addEventListener('resize', function () {\r\n      this.setSize()\r\n    }.bind(this))\r\n\r\n    // Save or print\r\n    if (options.saveAs) {\r\n      this.on('print', function (e) {\r\n        if (!e.pdf) {\r\n          // Save image as file\r\n          e.canvas.toBlob(function (blob) {\r\n            var name = (e.print.legend ? 'legend.' : 'map.') + e.imageType.replace('image/', '')\r\n            options.saveAs(blob, name)\r\n          }, e.imageType, e.quality)\r\n        }\r\n      })\r\n    }\r\n    // Save or print\r\n    if (options.jsPDF) {\r\n      this.on('print', function (e) {\r\n        if (e.pdf) {\r\n          // Export pdf using the print info\r\n          var pdf = new options.jsPDF({\r\n            orientation: e.print.orientation,\r\n            unit: e.print.unit,\r\n            format: e.print.size\r\n          })\r\n          pdf.addImage(e.image, 'JPEG', e.print.position[0], e.print.position[0], e.print.imageWidth, e.print.imageHeight)\r\n          pdf.save(e.print.legend ? 'legend.pdf' : 'map.pdf')\r\n        }\r\n      })\r\n    }\r\n  }\r\n  /** Add a new language\r\n   * @param {string} lang lang id\r\n   * @param {Objetct} labels\r\n   */\r\n  static addLang(lang, labels) {\r\n    ol_control_PrintDialog.prototype._labels[lang] = labels\r\n  }\r\n  /** Check if the dialog is oprn\r\n   * @return {boolean}\r\n   */\r\n  isOpen() {\r\n    return this._printDialog.isOpen()\r\n  }\r\n  /** Translate\r\n   * @param {string} what\r\n   * @returns {string}\r\n   */\r\n  i18n(what) {\r\n    var rep = this._labels.en[what] || what;\r\n    if (this._labels[this._lang] && this._labels[this._lang][what]) {\r\n      rep = this._labels[this._lang][what]\r\n    }\r\n    return rep\r\n  }\r\n  /** Get print orientation\r\n   * @returns {string}\r\n   */\r\n  getOrientation() {\r\n    return this._orientation || 'portrait'\r\n  }\r\n  /** Set print orientation\r\n   * @param {string} ori landscape or portrait\r\n   */\r\n  setOrientation(ori) {\r\n    this._orientation = (ori === 'landscape' ? 'landscape' : 'portrait')\r\n    this._printDialog.element.dataset.orientation = this._orientation\r\n    this._input.orientation[this._orientation].checked = true\r\n    this.setSize()\r\n  }\r\n  /** Get print margin\r\n   * @returns {number}\r\n   */\r\n  getMargin() {\r\n    return this._margin || 0\r\n  }\r\n  /** Set print margin\r\n   * @param {number}\r\n   */\r\n  setMargin(margin) {\r\n    this._margin = margin\r\n    this._input.margin.value = margin\r\n    this.setSize()\r\n  }\r\n  /** Get print size\r\n   * @returns {ol.size}\r\n   */\r\n  getSize() {\r\n    return this._size\r\n  }\r\n  /** Set map print size\r\n   * @param {ol/size|string} size map size as ol/size or A4, etc.\r\n   */\r\n  setSize(size) {\r\n    // reset status\r\n    this._printDialog.getContentElement().dataset.status = ''\r\n\r\n    if (size) {\r\n      this._size = size\r\n    } else {\r\n      size = this._size\r\n    }\r\n    if (!size) return\r\n\r\n    if (typeof (size) === 'string') {\r\n      // Test uppercase\r\n      for (var k in this.paperSize) {\r\n        if (k && new RegExp(k, 'i').test(size)) {\r\n          size = k\r\n        }\r\n      }\r\n      // Default\r\n      if (!this.paperSize[size])\r\n        size = this._size = 'A4'\r\n      this._input.size.value = size\r\n      size = [\r\n        Math.trunc(this.paperSize[size][0] * 96 / 25.4),\r\n        Math.trunc(this.paperSize[size][1] * 96 / 25.4)\r\n      ]\r\n      if (this.getOrientation() === 'landscape') {\r\n        size = [size[1], size[0]]\r\n      }\r\n      this.getPage().classList.remove('margin')\r\n    } else {\r\n      this._input.size.value = ''\r\n      this.getPage().classList.add('margin')\r\n    }\r\n\r\n    var printElement = this.getPage()\r\n    var s = printElement.parentNode.getBoundingClientRect()\r\n    var scx = (s.width - 40) / size[0]\r\n    var scy = (s.height - 40) / size[1]\r\n    var sc = Math.min(scx, scy, 1)\r\n    printElement.style.width = size[0] + 'px'\r\n    printElement.style.height = size[1] + 'px'\r\n    printElement.style['-webkit-transform'] =\r\n      printElement.style.transform = 'translate(-50%,-50%) scale(' + sc + ')'\r\n    var px = Math.round(5 / sc)\r\n    printElement.style['-webkit-box-shadow'] =\r\n      printElement.style['box-shadow'] = px + 'px ' + px + 'px ' + px + 'px rgba(0,0,0,.6)'\r\n    printElement.style['padding'] = (this.getMargin() * 96 / 25.4) + 'px'\r\n\r\n    if (this.getMap()) {\r\n      this.getMap().updateSize()\r\n    }\r\n\r\n    this.dispatchEvent({ type: 'dialog:refresh' })\r\n  }\r\n  /** Dispatch print events\r\n   * @private\r\n   */\r\n  _printing(e) {\r\n    this._printDialog.getContentElement().dataset.status = e.type\r\n    if (!e.clipboard) {\r\n      this.dispatchEvent(e)\r\n    }\r\n  }\r\n  /** Copy map to clipboard\r\n   * @param {string} format\r\n   * @return {boolean} if copy\r\n   * @private\r\n   */\r\n  _copyMap(format) {\r\n    var copied = this._printDialog.element.querySelector('.ol-clipboard-copy')\r\n    this._printCtrl.copyMap(this.formats[format], function (isok) {\r\n      if (isok) {\r\n        copied.classList.add('visible')\r\n        setTimeout(function () { copied.classList.remove('visible') }, 1000)\r\n      }\r\n    })\r\n    return true\r\n  }\r\n  /** Get dialog content element\r\n   * @return {Element}\r\n   */\r\n  getContentElement() {\r\n    return this._printDialog.getContentElement()\r\n  }\r\n  /** Get dialog user element\r\n   * @return {Element}\r\n   */\r\n  getUserElement() {\r\n    return this._printDialog.getContentElement().querySelector('.ol-user-param')\r\n  }\r\n  /** Get page element\r\n   * @return {Element}\r\n   */\r\n  getPage() {\r\n    return this._pages[0]\r\n  }\r\n  /**\r\n   * Remove the control from its current map and attach it to the new map.\r\n   * Subclasses may set up event handlers to get notified about changes to\r\n   * the map here.\r\n   * @param {ol.Map} map Map.\r\n   * @api stable\r\n   */\r\n  setMap(map) {\r\n    if (this.getMap()) {\r\n      this.getMap().removeControl(this._compass)\r\n      this.getMap().removeControl(this._printCtrl)\r\n      this.getMap().removeControl(this._printDialog)\r\n    }\r\n    super.setMap(map)\r\n    if (this.getMap()) {\r\n      this.getMap().addControl(this._compass)\r\n      this.getMap().addControl(this._printCtrl)\r\n      this.getMap().addControl(this._printDialog)\r\n    }\r\n  }\r\n  /** Set the current scale (will change the scale of the map)\r\n   * @param {number|string} value the scale factor or a scale string as 1/xxx\r\n   */\r\n  setScale(value) {\r\n    ol_sphere_setMapScale(this.getMap(), value)\r\n    this._input.scale.value = ' ' + (Math.round(value / 100) * 100)\r\n  }\r\n  /** Get the current map scale factor\r\n   * @return {number}\r\n   */\r\n  getScale() {\r\n    return ol_sphere_getMapScale(this.getMap())\r\n  }\r\n  /** Show print dialog\r\n   * @param {*}\r\n   *  @param {ol/size|string} options.size map size as ol/size or A4, etc.\r\n   *  @param {number|string} options.value the scale factor or a scale string as 1/xxx\r\n   *  @param {string} options.orientation landscape or portrait\r\n   *  @param {number} options.margin\r\n   */\r\n  print(options) {\r\n    options = options || {}\r\n    if (options.size) this.setSize(options.size)\r\n    if (options.scale) this.setScale(options.scale)\r\n    if (options.orientation) this.setOrientation(options.orientation)\r\n    if (options.margin) this.setMargin(options.margin)\r\n    this._printDialog.show()\r\n  }\r\n  /** Get print control\r\n   * @returns {ol_control_Print}\r\n   */\r\n  getPrintControl() {\r\n    return this._printCtrl\r\n  }\r\n}\r\n\r\n/** Print dialog labels (for customisation) */\r\nol_control_PrintDialog.prototype._labels = {\r\n  en: {\r\n    title: 'Print',\r\n    orientation: 'Orientation',\r\n    portrait: 'Portrait',\r\n    landscape: 'Landscape',\r\n    size: 'Page size',\r\n    custom: 'screen size',\r\n    margin: 'Margin',\r\n    scale: 'Scale',\r\n    legend: 'Legend',\r\n    north: 'North arrow',\r\n    mapTitle: 'Map title',\r\n    saveas: 'Save as...',\r\n    saveLegend: 'Save legend...',\r\n    copied: '✔ Copied to clipboard',\r\n    errorMsg: 'Can\\'t save map canvas...',\r\n    printBt: 'Print...',\r\n    clipboardFormat: 'copy to clipboard...',\r\n    jpegFormat: 'save as jpeg',\r\n    pngFormat: 'save as png',\r\n    pdfFormat: 'save as pdf',\r\n    none: 'none',\r\n    small: 'small',\r\n    large: 'large',  \r\n    cancel: 'cancel'\r\n  },\r\n  fr: {\r\n    title: 'Imprimer',\r\n    orientation: 'Orientation',\r\n    portrait: 'Portrait',\r\n    landscape: 'Paysage',\r\n    size: 'Taille du papier',\r\n    custom: 'taille écran',\r\n    margin: 'Marges',\r\n    scale: 'Echelle',\r\n    legend: 'Légende',\r\n    north: 'Flèche du nord',\r\n    mapTitle: 'Titre de la carte',\r\n    saveas: 'Enregistrer sous...',\r\n    saveLegend: 'Enregistrer la légende...',\r\n    copied: '✔ Carte copiée',\r\n    errorMsg: 'Impossible d\\'enregistrer la carte',\r\n    printBt: 'Imprimer',\r\n    clipboardFormat: 'copier dans le presse-papier...',\r\n    jpegFormat: 'enregistrer un jpeg',\r\n    pngFormat: 'enregistrer un png',\r\n    pdfFormat: 'enregistrer un pdf',\r\n    none: 'aucune',\r\n    small: 'petites',\r\n    large: 'larges',  \r\n    cancel: 'annuler'\r\n  },\r\n  de: {\r\n    title: 'Drucken',\r\n    orientation: 'Ausrichtung',\r\n    portrait: 'Hochformat',\r\n    landscape: 'Querformat',\r\n    size: 'Papierformat',\r\n    custom: 'Bildschirmgröße',\r\n    margin: 'Rand',\r\n    scale: 'Maßstab',\r\n    legend: 'Legende',\r\n    north: 'Nordpfeil',\r\n    mapTitle: 'Kartentitel',\r\n    saveas: 'Speichern als...',\r\n    saveLegend: 'Legende speichern...',\r\n    copied: '✔ In die Zwischenablage kopiert',\r\n    errorMsg: 'Kann Karte nicht speichern...',\r\n    printBt: 'Drucken...',\r\n    clipboardFormat: 'in die Zwischenablage kopieren...',\r\n    jpegFormat: 'speichern als jpeg',\r\n    pngFormat: 'speichern als png',\r\n    pdfFormat: 'speichern als pdf',\r\n    none: 'kein',\r\n    small: 'klein',\r\n    large: 'groß',  \r\n    cancel: 'abbrechen'\r\n  },\r\n  zh:{\r\n    title: '打印',\r\n    orientation: '方向',\r\n    portrait: '纵向',\r\n    landscape: '横向',\r\n    size: '页面大小',\r\n    custom: '屏幕大小',\r\n    margin: '外边距',\r\n    scale: '尺度',\r\n    legend: '图例',\r\n    north: '指北针',\r\n    mapTitle: '地图名字',\r\n    saveas: '保存为...',\r\n    saveLegend: '保存图例为...',\r\n    copied: '✔ 已复制到剪贴板',\r\n    errorMsg: '无法保存地图...',\r\n    printBt: '打印...',\r\n    cancel: '取消'\r\n  }\r\n};\r\n\r\n/** List of paper size */\r\nol_control_PrintDialog.prototype.paperSize = {\r\n  '': null,\r\n  'A0': [841,1189],\r\n  'A1': [594,841],\r\n  'A2': [420,594],\r\n  'A3': [297,420],\r\n  'A4': [210,297],\r\n  'US Letter': [215.9,279.4],\r\n  'A5': [148,210],\r\n  'B4': [257,364],\r\n  'B5': [182,257]\r\n};\r\n\r\n/** List of margin size */\r\nol_control_PrintDialog.prototype.marginSize = {\r\n  none: 0,\r\n  small: 5,\r\n  large: 10\r\n};\r\n\r\n/** List of legeng options * /\r\nol_control_PrintDialog.prototype.legendOptions = {\r\n  off: 'Hide legend',\r\n  on: 'Show legend'\r\n};\r\n\r\n/** List of print image file formats */\r\nol_control_PrintDialog.prototype.formats = [{\r\n    title: 'clipboardFormat',\r\n    imageType: 'image/png',\r\n    clipboard: true\r\n  }, {\r\n    title: 'jpegFormat',\r\n    imageType: 'image/jpeg',\r\n    quality: .8\r\n  }, {\r\n    title: 'pngFormat',\r\n    imageType: 'image/png',\r\n    quality: .8\r\n  }, {\r\n    title: 'pdfFormat',\r\n    imageType: 'image/jpeg',\r\n    pdf: true\r\n  }\r\n];\r\n\r\n/** List of print scale */\r\nol_control_PrintDialog.prototype.scales = {\r\n  ' 5000': '1/5.000',\r\n  ' 10000': '1/10.000',\r\n  ' 25000': '1/25.000',\r\n  ' 50000': '1/50.000',\r\n  ' 100000': '1/100.000',\r\n  ' 250000': '1/250.000',\r\n  ' 1000000': '1/1.000.000'\r\n};\r\n\r\nexport default ol_control_PrintDialog\r\n"],
  "mappings": "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",
  "names": ["Legend_default", "e", "r", "r2", "s", "size", "Legend_default"]
}
