{
  "version": 3,
  "sources": ["../../ol-ext/particule/Rain.js"],
  "sourcesContent": ["/*\r\n  Copyright (c) 2020 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_particule_Base from './Base.js'\r\n\r\n/** Rain particules to display clouds over the map\r\n * @constructor\r\n * @extends {ol_particule_Base}\r\n * @param {*} options\r\n *  @param {ol.Overlay} options.overlay\r\n *  @param {ol.pixel} options.coordinate the position of the particule\r\n */\r\nvar ol_particule_Rain = class olparticuleRain extends ol_particule_Base {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.z = Math.floor(Math.random() * 5) + 1;\r\n\r\n    var canvas = document.createElement('CANVAS');\r\n    canvas.width = 50;\r\n    canvas.height = 50;\r\n    var ctx = canvas.getContext('2d');\r\n    this.gradient = ctx.createRadialGradient(0, 0, 0, 0, 0, 25);\r\n    this.gradient.addColorStop(0, 'rgba(0,0,80,0)');\r\n    this.gradient.addColorStop(1, 'rgba(0,0,80,.3)');\r\n\r\n  }\r\n  /** Draw the particule\r\n   * @param {CanvasRenderingContext2D } ctx\r\n   */\r\n  draw(ctx) {\r\n    ctx.save();\r\n    var angle = this.getOverlay().get('angle');\r\n    ctx.beginPath();\r\n    var x1 = Math.cos(angle) * 10 * (1 + this.z / 2);\r\n    var y1 = Math.sin(angle) * 10 * (1 + this.z / 2);\r\n    ctx.lineWidth = Math.round(this.z / 2);\r\n    ctx.strokeStyle = this.gradient;\r\n    ctx.translate(this.coordinate[0], this.coordinate[1]);\r\n    ctx.moveTo(0, 0);\r\n    ctx.lineTo(x1, y1);\r\n    ctx.stroke();\r\n    ctx.restore();\r\n  }\r\n  /** Update the particule\r\n   * @param {number} dt timelapes since last call\r\n   */\r\n  update(dt) {\r\n    var dl = this.getOverlay().get('speed') * dt / this.getOverlay()._fps * this.z;\r\n    var angle = this.getOverlay().get('angle');\r\n    this.coordinate[0] += dl * Math.cos(angle);\r\n    this.coordinate[1] += dl * Math.sin(angle);\r\n  }\r\n}\r\n\r\nexport default ol_particule_Rain\r\n"],
  "mappings": ";;;;;;;;;AAcA,IAAI,oBAAoB,MAAM,wBAAwB,aAAkB;AAAA,EACtE,YAAY,SAAS;AACnB,cAAU,WAAW,CAAC;AAEtB,UAAM,OAAO;AAEb,SAAK,IAAI,KAAK,MAAM,KAAK,OAAO,IAAI,CAAC,IAAI;AAEzC,QAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,WAAO,QAAQ;AACf,WAAO,SAAS;AAChB,QAAI,MAAM,OAAO,WAAW,IAAI;AAChC,SAAK,WAAW,IAAI,qBAAqB,GAAG,GAAG,GAAG,GAAG,GAAG,EAAE;AAC1D,SAAK,SAAS,aAAa,GAAG,gBAAgB;AAC9C,SAAK,SAAS,aAAa,GAAG,iBAAiB;AAAA,EAEjD;AAAA;AAAA;AAAA;AAAA,EAIA,KAAK,KAAK;AACR,QAAI,KAAK;AACT,QAAI,QAAQ,KAAK,WAAW,EAAE,IAAI,OAAO;AACzC,QAAI,UAAU;AACd,QAAI,KAAK,KAAK,IAAI,KAAK,IAAI,MAAM,IAAI,KAAK,IAAI;AAC9C,QAAI,KAAK,KAAK,IAAI,KAAK,IAAI,MAAM,IAAI,KAAK,IAAI;AAC9C,QAAI,YAAY,KAAK,MAAM,KAAK,IAAI,CAAC;AACrC,QAAI,cAAc,KAAK;AACvB,QAAI,UAAU,KAAK,WAAW,CAAC,GAAG,KAAK,WAAW,CAAC,CAAC;AACpD,QAAI,OAAO,GAAG,CAAC;AACf,QAAI,OAAO,IAAI,EAAE;AACjB,QAAI,OAAO;AACX,QAAI,QAAQ;AAAA,EACd;AAAA;AAAA;AAAA;AAAA,EAIA,OAAO,IAAI;AACT,QAAI,KAAK,KAAK,WAAW,EAAE,IAAI,OAAO,IAAI,KAAK,KAAK,WAAW,EAAE,OAAO,KAAK;AAC7E,QAAI,QAAQ,KAAK,WAAW,EAAE,IAAI,OAAO;AACzC,SAAK,WAAW,CAAC,KAAK,KAAK,KAAK,IAAI,KAAK;AACzC,SAAK,WAAW,CAAC,KAAK,KAAK,KAAK,IAAI,KAAK;AAAA,EAC3C;AACF;AAEA,IAAO,eAAQ;",
  "names": []
}
