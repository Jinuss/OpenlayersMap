{
  "version": 3,
  "sources": ["../../ol-ext/particule/RainDrop.js"],
  "sourcesContent": ["/*\r\n  Copyright (c) 2020 Jean-Marc VIGLINO,\r\n  released under the CeCILL-B license (French BSD license)\r\n  (http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt).\r\n*/\r\nimport ol_particule_Base from './Base.js'\r\n\r\n/** Raindrop particules to display clouds over the map\r\n * @constructor\r\n * @extends {ol_particule_Base}\r\n * @param {*} options\r\n *  @param {ol.Overlay} options.overlay\r\n *  @param {ol.pixel} options.coordinate the position of the particule\r\n */\r\nvar ol_particule_RainDrop =class olparticuleRainDrop extends ol_particule_Base {\r\n  constructor(options) {\r\n    options = options || {};\r\n\r\n    super(options);\r\n\r\n    this.size = 0;\r\n\r\n    // Drops\r\n    var canvas = document.createElement('CANVAS');\r\n    canvas.width = 100;\r\n    canvas.height = 100;\r\n    var ctx = canvas.getContext('2d');\r\n    var grd = ctx.createRadialGradient(50, 50, 0, 50, 50, 50);\r\n    grd.addColorStop(0, 'rgba(128,128,192,.8');\r\n    grd.addColorStop(1, 'rgba(128,128,192,0');\r\n\r\n    this.image = canvas;\r\n    ctx.fillStyle = grd;\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n  }\r\n  /** Draw the particule\r\n   * @param {CanvasRenderingContext2D } ctx\r\n   */\r\n  draw(ctx) {\r\n    if (this.size > 0) {\r\n      ctx.save();\r\n      ctx.translate(this.coordinate[0], this.coordinate[1]);\r\n      ctx.globalAlpha = this.size / 50;\r\n      ctx.scale(1 - this.size / 50, 1 - this.size / 50);\r\n      ctx.drawImage(this.image, -50, -50);\r\n      ctx.restore();\r\n    }\r\n  }\r\n  /** Update the particule\r\n   * @param {number} dt timelapes since last call\r\n   */\r\n  update(dt) {\r\n    if (this.size > 0 || Math.random() < .01) {\r\n      if (this.size <= 0) {\r\n        this.size = 50;\r\n        this.coordinates = this.getRandomCoord();\r\n      }\r\n      this.size = this.size - Math.round(dt / 20);\r\n    }\r\n  }\r\n}\r\n\r\nexport default ol_particule_RainDrop\r\n"],
  "mappings": ";;;;;;;;;AAcA,IAAI,wBAAuB,MAAM,4BAA4B,aAAkB;AAAA,EAC7E,YAAY,SAAS;AACnB,cAAU,WAAW,CAAC;AAEtB,UAAM,OAAO;AAEb,SAAK,OAAO;AAGZ,QAAI,SAAS,SAAS,cAAc,QAAQ;AAC5C,WAAO,QAAQ;AACf,WAAO,SAAS;AAChB,QAAI,MAAM,OAAO,WAAW,IAAI;AAChC,QAAI,MAAM,IAAI,qBAAqB,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE;AACxD,QAAI,aAAa,GAAG,qBAAqB;AACzC,QAAI,aAAa,GAAG,oBAAoB;AAExC,SAAK,QAAQ;AACb,QAAI,YAAY;AAChB,QAAI,SAAS,GAAG,GAAG,OAAO,OAAO,OAAO,MAAM;AAAA,EAChD;AAAA;AAAA;AAAA;AAAA,EAIA,KAAK,KAAK;AACR,QAAI,KAAK,OAAO,GAAG;AACjB,UAAI,KAAK;AACT,UAAI,UAAU,KAAK,WAAW,CAAC,GAAG,KAAK,WAAW,CAAC,CAAC;AACpD,UAAI,cAAc,KAAK,OAAO;AAC9B,UAAI,MAAM,IAAI,KAAK,OAAO,IAAI,IAAI,KAAK,OAAO,EAAE;AAChD,UAAI,UAAU,KAAK,OAAO,KAAK,GAAG;AAClC,UAAI,QAAQ;AAAA,IACd;AAAA,EACF;AAAA;AAAA;AAAA;AAAA,EAIA,OAAO,IAAI;AACT,QAAI,KAAK,OAAO,KAAK,KAAK,OAAO,IAAI,MAAK;AACxC,UAAI,KAAK,QAAQ,GAAG;AAClB,aAAK,OAAO;AACZ,aAAK,cAAc,KAAK,eAAe;AAAA,MACzC;AACA,WAAK,OAAO,KAAK,OAAO,KAAK,MAAM,KAAK,EAAE;AAAA,IAC5C;AAAA,EACF;AACF;AAEA,IAAO,mBAAQ;",
  "names": []
}
