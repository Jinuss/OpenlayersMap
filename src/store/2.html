<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>OpenLayers Arc Example</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/openlayers/8.2.0/ol.min.css"
        integrity="sha512-bc9nJM5uKHN+wK7rtqMnzlGicwJBWR11SIDFJlYBe5fVOwjHGtXX8KMyYZ4sMgSL0CoUjo4GYgIBucOtqX/RUQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/8.2.0/dist/ol.min.js"
        integrity="sha512-+nvfloZUX7awRy1yslYBsicmHKh/qFW5w79+AiGiNcbewg0nBy7AS4G3+aK/Rm+eGPOKlO3tLuVphMxFXeKeOQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>

<body>
    <div id="map" class="map"></div>
    <script>
        // 初始化地图和视图
        var map = new ol.Map({
            target: 'map',
            layers: [
                new ol.layer.Tile({
                    source: new ol.source.OSM()
                })
            ],
            view: new ol.View({
                center: ol.proj.fromLonLat([0, 0]),
                zoom: 2
            })
        });

        // 定义两条线段作为夹角的两边
        var line1 = new ol.geom.LineString([
            ol.proj.fromLonLat([0, 0]),
            ol.proj.fromLonLat([30, 30])
        ]);

        var line2 = new ol.geom.LineString([
            ol.proj.fromLonLat([0, 0]),
            ol.proj.fromLonLat([-30, 30])
        ]);

        // 计算夹角的中心点和半径
        var p1 = line1.getFirstCoordinate();
        var p2 = line1.getLastCoordinate();
        var p3 = line2.getLastCoordinate();

        var center = ol.coordinate.closestOnSegment(p1, [p2, p3]);
        var radius = ol.coordinate.distance(center, p1);

        // 创建弧线表示夹角
        var arc = new ol.geom.Arc(center, radius, 0, Math.PI);

        // 将弧线添加到图层
        var arcFeature = new ol.Feature(arc);
        var vectorSource = new ol.source.Vector({
            features: [arcFeature]
        });

        var vectorLayer = new ol.layer.Vector({
            source: vectorSource
        });

        map.addLayer(vectorLayer);
    </script>
</body>

</html>